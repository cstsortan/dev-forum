!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(4);t.CustomElement=(e=>t=>{if(o.validateSelector(e.selector),!e.template)throw new Error("You need to pass a template for the element");const n=document.createElement("template");e.style&&(e.template=`<style>${e.style}</style> ${e.template}`),n.innerHTML=e.template;const r=t.prototype.connectedCallback||function(){},l=t.prototype.disconnectedCallback||function(){};t.prototype.connectedCallback=function(){const t=document.importNode(n.content,!0);e.useShadow?this.attachShadow({mode:"open"}).appendChild(t):this.appendChild(t),this.componentWillMount&&this.componentWillMount(),r.call(this),this.componentDidMount&&this.componentDidMount()},t.prototype.disconnectedCallback=function(){this.componentWillUnmount&&this.componentWillUnmount(),l.call(this),this.componentDidUnmount&&this.componentDidUnmount()},window.customElements.define(e.selector,t)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(2);new class{constructor(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(3),n(5),n(6)},function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var r,l=arguments.length,i=l<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(l<3?r(i):l>3?r(t,n,i):r(t,n))||i);return l>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(t,"__esModule",{value:!0});let r=class extends HTMLElement{constructor(){super(...arguments),this.globalCounter=0}componentWillMount(){this.addCounterBtn=this.shadowRoot.querySelector("flat-btn"),this.globalCounterH1=this.shadowRoot.querySelector("h1"),this.addListenners()}addListenners(){this.addCounterBtn.addEventListener("click",e=>{this.addCounter()})}addCounter(){const e=document.createElement("app-counter");e.addEventListener("counterIncreased",e=>{this.globalCounter++,this.renderGlobalCounter()}),e.addEventListener("counterDeleted",t=>{this.globalCounter-=t.detail,this.renderGlobalCounter(),this.shadowRoot.removeChild(e)}),this.shadowRoot.appendChild(e)}renderGlobalCounter(){this.globalCounterH1.textContent=this.globalCounter.toString()}};r=o([n(0).CustomElement({selector:"app-root",template:'\n        <div>\n            <h1>0</h1>\n            <flat-btn color="primary">Add Counter</flat-btn>\n        </div>\n    ',style:"\n        :host {\n            display: block;\n        }\n    ",useShadow:!0})],r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSelector=(e=>{if(e.indexOf("-")<=0)throw new Error("You need at least 1 dash in the custom element name!")})},function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var r,l=arguments.length,i=l<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(l<3?r(i):l>3?r(t,n,i):r(t,n))||i);return l>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(t,"__esModule",{value:!0});let r=class extends HTMLElement{constructor(){super(...arguments),this.counter=0}connectedCallback(){this.addBtn=this.shadowRoot.querySelector("#addBtn"),this.counterDiv=this.shadowRoot.querySelector("#counter"),this.deleteBtn=this.shadowRoot.querySelector(".deleteBtn"),this.initializeCounterState(),this.addListenners()}initializeCounterState(){this.counter=0}addListenners(){this.addBtn&&this.deleteBtn&&(this.addBtn.addEventListener("click",()=>{this.counter++,this.renderCounter(),this.dispatchEvent(new CustomEvent("counterIncreased",{}))}),this.deleteBtn.addEventListener("click",()=>{this.dispatchEvent(new CustomEvent("counterDeleted",{detail:this.counter}))}))}renderCounter(){this.counterDiv&&(this.counterDiv.innerText=this.counter.toString())}};r=o([n(0).CustomElement({selector:"app-counter",template:'\n    <div class="card">\n        <div class="card-header">\n            This is some cool card <span><flat-btn class="deleteBtn" color="danger">x</flat-btn></span>\n        </div>\n        <div id="counter" class="counter-display">\n            0\n        </div>\n        <div class="card-footer">\n            <flat-btn color="primary" class="addBtn" id="addBtn">\n                +\n            </flat-btn>\n        </div>\n    </div>\n    ',useShadow:!0,style:"\n        .card {\n            padding: 10px;\n            margin: 10px;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n            border: #C1C1C1 solid 1px;\n            border-radius: 4px;\n        }\n        .deleteBtn {\n            display: inline-block;\n        }\n        .counter-display {\n            font-size: 35px;\n        }\n    "})],r),t.AppCounter=r},function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var r,l=arguments.length,i=l<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(l<3?r(i):l>3?r(t,n,i):r(t,n))||i);return l>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(t,"__esModule",{value:!0});let r=class extends HTMLElement{constructor(){super(...arguments),this.color=""}componentWillMount(){this.btnElem=this.shadowRoot.querySelector("button.btn"),this.btnElem.classList.add(this.getAttribute("color")||"")}};r=o([n(0).CustomElement({selector:"flat-btn",template:'\n        <button class="btn">\n            <slot></slot>\n        </button>\n    ',useShadow:!0,style:"\n    :host {\n        display:block;\n    }\n    .btn {\n        border: none;\n        border-radius: 3px;\n        padding: 6px 16px;\n        color: white;\n    }\n    .primary {\n        background-color: var(--primary-color);\n    }\n\n    .secondary {\n        background-color: var(--secondary-color);\n    }\n\n    .danger {\n        background-color: var(--danger-color);\n    }\n    "})],r),t.FlatBtn=r}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzL2N1c3RvbS1lbGVtZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9hcHAtcm9vdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMvdmFsaWRhdGUtc2VsZWN0b3IudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvYXBwLWNvdW50ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvZmxhdC1idG4udHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJ2YWxpZGF0ZV9zZWxlY3Rvcl8xIiwiQ3VzdG9tRWxlbWVudCIsImNvbmZpZyIsImNscyIsInZhbGlkYXRlU2VsZWN0b3IiLCJzZWxlY3RvciIsInRlbXBsYXRlIiwiRXJyb3IiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzdHlsZSIsImlubmVySFRNTCIsImNvbm5lY3RlZENhbGxiYWNrIiwiZGlzY29ubmVjdGVkQ2FsbGJhY2siLCJjbG9uZSIsImltcG9ydE5vZGUiLCJjb250ZW50IiwidXNlU2hhZG93IiwidGhpcyIsImF0dGFjaFNoYWRvdyIsImFwcGVuZENoaWxkIiwiY29tcG9uZW50V2lsbE1vdW50IiwiY29tcG9uZW50RGlkTW91bnQiLCJjb21wb25lbnRXaWxsVW5tb3VudCIsImNvbXBvbmVudERpZFVubW91bnQiLCJ3aW5kb3ciLCJjdXN0b21FbGVtZW50cyIsImRlZmluZSIsIltvYmplY3QgT2JqZWN0XSIsIkFwcFJvb3QiLCJIVE1MRWxlbWVudCIsImdsb2JhbENvdW50ZXIiLCJhZGRDb3VudGVyQnRuIiwic2hhZG93Um9vdCIsInF1ZXJ5U2VsZWN0b3IiLCJnbG9iYWxDb3VudGVySDEiLCJhZGRMaXN0ZW5uZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJhZGRDb3VudGVyIiwibmV3Q291bnRlciIsInJlbmRlckdsb2JhbENvdW50ZXIiLCJkZXRhaWwiLCJyZW1vdmVDaGlsZCIsInRleHRDb250ZW50IiwidG9TdHJpbmciLCJfX2RlY29yYXRlIiwiaW5kZXhPZiIsIkFwcENvdW50ZXIiLCJjb3VudGVyIiwiYWRkQnRuIiwiY291bnRlckRpdiIsImRlbGV0ZUJ0biIsImluaXRpYWxpemVDb3VudGVyU3RhdGUiLCJyZW5kZXJDb3VudGVyIiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwiaW5uZXJUZXh0IiwiRmxhdEJ0biIsImNvbG9yIiwiYnRuRWxlbSIsImNsYXNzTGlzdCIsImFkZCIsImdldEF0dHJpYnV0ZSJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxF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QXpDdkJsRixFQUFBLEdBRUNxQyxlQUNHSSxTQUFVLGNBQ1ZDLFNBQ0EsOGJBZUFXLFdBQVcsRUFDWFAsTUFDQSwyYkFtQlNzQyxHQUFBbEYsRUFBQWtGLDZiQ05iLElBQWFVLGdCQUFnQjVCLFlBakM3QkYsa0NBb0NJVixLQUFBeUMsTUFBZ0IsR0FFaEIvQixxQkFDSVYsS0FBSzBDLFFBQVUxQyxLQUFLZSxXQUFZQyxjQUFjLGNBQzlDaEIsS0FBSzBDLFFBQVNDLFVBQVVDLElBQUk1QyxLQUFLNkMsYUFBYSxVQUFZLE1BUHJETCxFQUFPWixHQW5DcEJsRixFQUFBLEdBRUNxQyxlQUNHSSxTQUFVLFdBQ1ZDLFNBQ0EscUZBS0FXLFdBQVcsRUFDWFAsTUFDQSxnWkF1QlNnRCxHQUFBNUYsRUFBQTRGIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcbiIsImltcG9ydCB7IEN1c3RvbUVsZW1lbnRDb25maWcgfSBmcm9tIFwiLi9jdXN0b20tZWxlbWVudC1jb25maWdcIjtcclxuaW1wb3J0IHsgdmFsaWRhdGVTZWxlY3RvciB9IGZyb20gXCIuL3ZhbGlkYXRlLXNlbGVjdG9yXCI7XHJcblxyXG5leHBvcnQgY29uc3QgQ3VzdG9tRWxlbWVudCA9IChjb25maWc6IEN1c3RvbUVsZW1lbnRDb25maWcpID0+IChjbHM6IGFueSkgPT4ge1xyXG4gICAgdmFsaWRhdGVTZWxlY3Rvcihjb25maWcuc2VsZWN0b3IpO1xyXG4gICAgaWYgKCFjb25maWcudGVtcGxhdGUpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBuZWVkIHRvIHBhc3MgYSB0ZW1wbGF0ZSBmb3IgdGhlIGVsZW1lbnQnKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcclxuICAgIGlmIChjb25maWcuc3R5bGUpIHtcclxuICAgICAgICBjb25maWcudGVtcGxhdGUgPSBgPHN0eWxlPiR7Y29uZmlnLnN0eWxlfTwvc3R5bGU+ICR7Y29uZmlnLnRlbXBsYXRlfWA7XHJcbiAgICB9XHJcbiAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBjb25maWcudGVtcGxhdGU7XHJcblxyXG4gICAgY29uc3QgY29ubmVjdGVkQ2FsbGJhY2sgPSBjbHMucHJvdG90eXBlLmNvbm5lY3RlZENhbGxiYWNrIHx8IGZ1bmN0aW9uICgpIHt9O1xyXG4gICAgY29uc3QgZGlzY29ubmVjdGVkQ2FsbGJhY2sgPSBjbHMucHJvdG90eXBlLmRpc2Nvbm5lY3RlZENhbGxiYWNrIHx8IGZ1bmN0aW9uICgpIHt9O1xyXG5cclxuICAgIGNscy5wcm90b3R5cGUuY29ubmVjdGVkQ2FsbGJhY2sgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBjb25zdCBjbG9uZSA9IGRvY3VtZW50LmltcG9ydE5vZGUodGVtcGxhdGUuY29udGVudCwgdHJ1ZSk7XHJcbiAgICAgICAgaWYgKGNvbmZpZy51c2VTaGFkb3cpIHtcclxuICAgICAgICAgICAgdGhpcy5hdHRhY2hTaGFkb3coe21vZGU6ICdvcGVuJ30pLmFwcGVuZENoaWxkKGNsb25lKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmFwcGVuZENoaWxkKGNsb25lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudFdpbGxNb3VudCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudFdpbGxNb3VudCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25uZWN0ZWRDYWxsYmFjay5jYWxsKHRoaXMpO1xyXG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudERpZE1vdW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50RGlkTW91bnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGNscy5wcm90b3R5cGUuZGlzY29ubmVjdGVkQ2FsbGJhY2sgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAodGhpcy5jb21wb25lbnRXaWxsVW5tb3VudCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudFdpbGxVbm1vdW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRpc2Nvbm5lY3RlZENhbGxiYWNrLmNhbGwodGhpcyk7XHJcbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50RGlkVW5tb3VudCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudERpZFVubW91bnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHdpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoY29uZmlnLnNlbGVjdG9yLCBjbHMpO1xyXG59OyIsImltcG9ydCAnLi9jb21wb25lbnRzJztcclxuXHJcbmNsYXNzIEFwcCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBcclxuICAgIH1cclxufVxyXG5cclxubmV3IEFwcCgpO1xyXG4iLCJpbXBvcnQgJy4vYXBwLXJvb3QnO1xyXG5pbXBvcnQgJy4vYXBwLWNvdW50ZXInO1xyXG5pbXBvcnQgJy4vZmxhdC1idG4nO1xyXG4vLyBpbXBvcnQgJy4vYXBwLWJ0bic7IiwiaW1wb3J0IHsgQ3VzdG9tRWxlbWVudCB9IGZyb20gXCIuLi91dGlscy9jdXN0b20tZWxlbWVudFwiO1xyXG5pbXBvcnQge0ZsYXRCdG59IGZyb20gJy4vZmxhdC1idG4nO1xyXG5cclxuQEN1c3RvbUVsZW1lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdhcHAtcm9vdCcsXHJcbiAgICB0ZW1wbGF0ZTogLy9odG1sXHJcbiAgICBgXHJcbiAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgPGgxPjA8L2gxPlxyXG4gICAgICAgICAgICA8ZmxhdC1idG4gY29sb3I9XCJwcmltYXJ5XCI+QWRkIENvdW50ZXI8L2ZsYXQtYnRuPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgYCxcclxuICAgIHN0eWxlOiAvL2Nzc1xyXG4gICAgYFxyXG4gICAgICAgIDpob3N0IHtcclxuICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XHJcbiAgICAgICAgfVxyXG4gICAgYCxcclxuICAgIHVzZVNoYWRvdzogdHJ1ZSxcclxufSlcclxuY2xhc3MgQXBwUm9vdCBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuICAgIGFkZENvdW50ZXJCdG4hOiBGbGF0QnRuIHwgbnVsbDtcclxuICAgIGdsb2JhbENvdW50ZXJIMSE6IEhUTUxIZWFkaW5nRWxlbWVudCB8IG51bGw7XHJcblxyXG4gICAgZ2xvYmFsQ291bnRlciA9IDA7XHJcbiAgICBcclxuICAgIGNvbXBvbmVudFdpbGxNb3VudCAoKSB7XHJcbiAgICAgICAgdGhpcy5hZGRDb3VudGVyQnRuID0gdGhpcy5zaGFkb3dSb290IS5xdWVyeVNlbGVjdG9yKCdmbGF0LWJ0bicpO1xyXG4gICAgICAgIHRoaXMuZ2xvYmFsQ291bnRlckgxID0gdGhpcy5zaGFkb3dSb290IS5xdWVyeVNlbGVjdG9yKCdoMScpO1xyXG4gICAgICAgIHRoaXMuYWRkTGlzdGVubmVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZExpc3Rlbm5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5hZGRDb3VudGVyQnRuIS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmFkZENvdW50ZXIoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRDb3VudGVyKCkge1xyXG4gICAgICAgIGNvbnN0IG5ld0NvdW50ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhcHAtY291bnRlcicpO1xyXG4gICAgICAgIG5ld0NvdW50ZXIuYWRkRXZlbnRMaXN0ZW5lcignY291bnRlckluY3JlYXNlZCcsIGUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmdsb2JhbENvdW50ZXIrKztcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJHbG9iYWxDb3VudGVyKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbmV3Q291bnRlci5hZGRFdmVudExpc3RlbmVyKCdjb3VudGVyRGVsZXRlZCcsIChlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5nbG9iYWxDb3VudGVyIC09IGUuZGV0YWlsO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlckdsb2JhbENvdW50ZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5zaGFkb3dSb290IS5yZW1vdmVDaGlsZChuZXdDb3VudGVyKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QhLmFwcGVuZENoaWxkKG5ld0NvdW50ZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckdsb2JhbENvdW50ZXIoKSB7XHJcbiAgICAgICAgdGhpcy5nbG9iYWxDb3VudGVySDEhLnRleHRDb250ZW50ID0gdGhpcy5nbG9iYWxDb3VudGVyLnRvU3RyaW5nKCk7XHJcbiAgICB9XHJcbiAgICBcclxufSIsImV4cG9ydCBjb25zdCB2YWxpZGF0ZVNlbGVjdG9yID0gKHNlbGVjdG9yOiBzdHJpbmcpID0+IHtcclxuICAgIGlmIChzZWxlY3Rvci5pbmRleE9mKCctJykgPD0gMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignWW91IG5lZWQgYXQgbGVhc3QgMSBkYXNoIGluIHRoZSBjdXN0b20gZWxlbWVudCBuYW1lIScpO1xyXG4gICAgfVxyXG59OyIsImltcG9ydCB7IEN1c3RvbUVsZW1lbnQgfSBmcm9tIFwiLi4vdXRpbHMvY3VzdG9tLWVsZW1lbnRcIjtcclxuXHJcbkBDdXN0b21FbGVtZW50KHtcclxuICAgIHNlbGVjdG9yOiAnYXBwLWNvdW50ZXInLFxyXG4gICAgdGVtcGxhdGU6IC8vaHRtbFxyXG4gICAgYFxyXG4gICAgPGRpdiBjbGFzcz1cImNhcmRcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1oZWFkZXJcIj5cclxuICAgICAgICAgICAgVGhpcyBpcyBzb21lIGNvb2wgY2FyZCA8c3Bhbj48ZmxhdC1idG4gY2xhc3M9XCJkZWxldGVCdG5cIiBjb2xvcj1cImRhbmdlclwiPng8L2ZsYXQtYnRuPjwvc3Bhbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGlkPVwiY291bnRlclwiIGNsYXNzPVwiY291bnRlci1kaXNwbGF5XCI+XHJcbiAgICAgICAgICAgIDBcclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1mb290ZXJcIj5cclxuICAgICAgICAgICAgPGZsYXQtYnRuIGNvbG9yPVwicHJpbWFyeVwiIGNsYXNzPVwiYWRkQnRuXCIgaWQ9XCJhZGRCdG5cIj5cclxuICAgICAgICAgICAgICAgICtcclxuICAgICAgICAgICAgPC9mbGF0LWJ0bj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICAgYCxcclxuICAgIHVzZVNoYWRvdzogdHJ1ZSxcclxuICAgIHN0eWxlOiAvL2Nzc1xyXG4gICAgYFxyXG4gICAgICAgIC5jYXJkIHtcclxuICAgICAgICAgICAgcGFkZGluZzogMTBweDtcclxuICAgICAgICAgICAgbWFyZ2luOiAxMHB4O1xyXG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgICAgICAgICAgYm9yZGVyOiAjQzFDMUMxIHNvbGlkIDFweDtcclxuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgICAgIH1cclxuICAgICAgICAuZGVsZXRlQnRuIHtcclxuICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgICAgIH1cclxuICAgICAgICAuY291bnRlci1kaXNwbGF5IHtcclxuICAgICAgICAgICAgZm9udC1zaXplOiAzNXB4O1xyXG4gICAgICAgIH1cclxuICAgIGAsXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBBcHBDb3VudGVyIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xyXG4gICAgLy8gRE9NIFJlZnNcclxuICAgIGNvdW50ZXJEaXYhOiBIVE1MRGl2RWxlbWVudCB8IG51bGw7XHJcbiAgICBhZGRCdG4hOiBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGw7XHJcbiAgICBkZWxldGVCdG4hOiBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGw7XHJcblxyXG4gICAgLy8gU3RhdGVcclxuICAgIGNvdW50ZXI6IG51bWJlciA9IDA7XHJcbiAgICBcclxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xyXG4gICAgICAgIHRoaXMuYWRkQnRuID0gdGhpcy5zaGFkb3dSb290IS5xdWVyeVNlbGVjdG9yKFwiI2FkZEJ0blwiKTtcclxuICAgICAgICB0aGlzLmNvdW50ZXJEaXYgPSB0aGlzLnNoYWRvd1Jvb3QhLnF1ZXJ5U2VsZWN0b3IoXCIjY291bnRlclwiKTtcclxuICAgICAgICB0aGlzLmRlbGV0ZUJ0biA9IHRoaXMuc2hhZG93Um9vdCEucXVlcnlTZWxlY3RvcignLmRlbGV0ZUJ0bicpO1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZUNvdW50ZXJTdGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuYWRkTGlzdGVubmVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYWxpemVDb3VudGVyU3RhdGUoKSB7XHJcbiAgICAgICAgdGhpcy5jb3VudGVyID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBhZGRMaXN0ZW5uZXJzKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5hZGRCdG4gfHwgIXRoaXMuZGVsZXRlQnRuKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5hZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY291bnRlcisrO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlckNvdW50ZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnY291bnRlckluY3JlYXNlZCcsIHt9KSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5kZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2NvdW50ZXJEZWxldGVkJywge1xyXG4gICAgICAgICAgICAgICAgZGV0YWlsOiB0aGlzLmNvdW50ZXIsXHJcbiAgICAgICAgICAgIH0pKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcblxyXG4gICAgcmVuZGVyQ291bnRlcigpIHtcclxuICAgICAgICBpZighdGhpcy5jb3VudGVyRGl2KSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5jb3VudGVyRGl2LmlubmVyVGV4dCA9IHRoaXMuY291bnRlci50b1N0cmluZygpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgQ3VzdG9tRWxlbWVudCB9IGZyb20gXCIuLi91dGlscy9jdXN0b20tZWxlbWVudFwiO1xyXG5cclxuQEN1c3RvbUVsZW1lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdmbGF0LWJ0bicsXHJcbiAgICB0ZW1wbGF0ZTogLy9odG1sXHJcbiAgICBgXHJcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0blwiPlxyXG4gICAgICAgICAgICA8c2xvdD48L3Nsb3Q+XHJcbiAgICAgICAgPC9idXR0b24+XHJcbiAgICBgLFxyXG4gICAgdXNlU2hhZG93OiB0cnVlLFxyXG4gICAgc3R5bGU6IC8vY3NzXHJcbiAgICBgXHJcbiAgICA6aG9zdCB7XHJcbiAgICAgICAgZGlzcGxheTpibG9jaztcclxuICAgIH1cclxuICAgIC5idG4ge1xyXG4gICAgICAgIGJvcmRlcjogbm9uZTtcclxuICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7XHJcbiAgICAgICAgcGFkZGluZzogNnB4IDE2cHg7XHJcbiAgICAgICAgY29sb3I6IHdoaXRlO1xyXG4gICAgfVxyXG4gICAgLnByaW1hcnkge1xyXG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW1hcnktY29sb3IpO1xyXG4gICAgfVxyXG5cclxuICAgIC5zZWNvbmRhcnkge1xyXG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXNlY29uZGFyeS1jb2xvcik7XHJcbiAgICB9XHJcblxyXG4gICAgLmRhbmdlciB7XHJcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tZGFuZ2VyLWNvbG9yKTtcclxuICAgIH1cclxuICAgIGAsXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBGbGF0QnRuIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xyXG4gICAgYnRuRWxlbSE6IEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbDtcclxuXHJcbiAgICBjb2xvcjogc3RyaW5nID0gJyc7XHJcblxyXG4gICAgY29tcG9uZW50V2lsbE1vdW50KCkge1xyXG4gICAgICAgIHRoaXMuYnRuRWxlbSA9IHRoaXMuc2hhZG93Um9vdCEucXVlcnlTZWxlY3RvcihcImJ1dHRvbi5idG5cIik7XHJcbiAgICAgICAgdGhpcy5idG5FbGVtIS5jbGFzc0xpc3QuYWRkKHRoaXMuZ2V0QXR0cmlidXRlKCdjb2xvcicpIHx8ICcnKTtcclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=